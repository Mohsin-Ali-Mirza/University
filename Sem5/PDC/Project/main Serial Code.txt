#include <stdio.h>
#include <time.h>
#include <stdlib.h>
#include <omp.h>

int main()
{

	double start_time,run_time;
	int N = 10000;
	
	double** mat = (double**) malloc(N*sizeof(double));
	for(int i=0;i<N;i++)
		mat[i] = (double*)malloc(N*sizeof(double));

	double* b = (double*)malloc(N*sizeof(double));
	
	srand(time(NULL));

	for (int i = 0; i < N; i++)
	{
		int num = abs(rand() % 100);
		b[i] = num;
		for (int j = 0; j < N; j++)
		{
			int num2 = abs(rand() % 100);
			mat[i][j] = num2;

		}
	}

	printf("Randomly Generated Matrix\n");
	for (int i = 0; i < N; i++)
	{
		for (int j = 0; j < N; j++)
		{
			printf("%.0f ",mat[i][j]);
		}
		printf("\n");
	}

		start_time = omp_get_wtime();
		
	for (int i = 0; i < N - 1; i++)
	{
		for (int j = i; j < N; j++)
		{
				if (mat[i][i] == 0) {
				mat[i][i]++;
			}
			double ratio = mat[j][i] / mat[i][i];
			for (int k = i; k < N; k++)
			{
				mat[j][k] -= (ratio * mat[i][k]);
				b[j] -= (ratio * b[i]);
			}
		}
	}

	printf("\n");
	printf("Calculated Matrix After Gaussian Elimination\n");

	for (int i = 0; i < N; i++)
	{
		for (int j = 0; j < N; j++)
		{
			printf("%.0f ",mat[i][j]);
		}
		printf("\n");
	}

	printf("\n");
	run_time = omp_get_wtime() - start_time;
	printf("Time taken by program is : %.5f sec\n",run_time);



}